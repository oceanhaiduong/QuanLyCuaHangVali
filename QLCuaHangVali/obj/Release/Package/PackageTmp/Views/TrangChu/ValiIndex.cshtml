@model PagedList.IPagedList<QLCuaHangVali.Models.VALI>
@using QLCuaHangVali.Models;
@using PagedList.Mvc;
@{
    ViewBag.Title = "ValiIndex";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- //navigation -->
<!-- banner -->
<div id="myCarousel" class="carousel slide" data-ride="carousel">
    <!-- Indicators-->
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class=""></li>
        <li data-target="#myCarousel" data-slide-to="1" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="2" class=""></li>
        <li data-target="#myCarousel" data-slide-to="3" class=""></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="item ">
            <div class="container">
                <div class="carousel-caption">
                </div>
            </div>
        </div>
        <div class="item item2 active">
            <div class="container">
                <div class="carousel-caption">
                </div>
            </div>
        </div>
        <div class="item item3">
            <div class="container">
                <div class="carousel-caption">
                </div>
            </div>
        </div>
        <div class="item item4">
            <div class="container">
                <div class="carousel-caption">
                </div>
            </div>
        </div>
    </div>
    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>
<!-- //banner -->
<!-- top Products -->
<div class="ads-grid">
    <div class="container">
        <!-- tittle heading -->
        <h3 class="tittle-w3l">
            Sản phẩm hàng đầu của chúng tôi
            <span class="heading-style">
                <i></i>
                <i></i>
                <i></i>
            </span>
        </h3>
        <!-- //tittle heading -->
        <!-- product left -->
        <div class="side-bar col-md-3">
            <div class="search-hotel">
                <h3 class="agileits-sear-head">Tìm kiếm ở đây..</h3>
                <form action="#" method="post">
                    <input type="search" placeholder="Tên sản phẩm..." name="search" required="">
                    <input type="submit" value=" ">
                </form>
            </div>
            <!-- price range -->
            <div class="range">
                <h3 class="agileits-sear-head">Phạm vi giá</h3>
                <ul class="dropdown-menu6">
                    <li>

                        <div id="slider-range"></div>
                        <input type="text" id="amount" style="border: 0; color: #ffffff; font-weight: normal;" />
                    </li>
                </ul>
            </div>
            <!-- //price range -->
            <!-- food preference -->
            <div class="left-side">
                <h3 class="agileits-sear-head">Size Vali</h3>
                <ul>
                    @Html.Action("Size", "TimKiem")
                </ul>
            </div>
            <div class="left-side">

                <h3 class="agileits-sear-head">Màu Sắc</h3>
                <ul>
                    @Html.Action("MauSac", "TimKiem")
                </ul>
            </div>
            <!-- //food preference -->
            <!-- discounts -->
            <div class="left-side">
                <h3 class="agileits-sear-head">Khuyến Mãi</h3>
                <ul>
                    <li>
                        <input type="checkbox" class="checked">
                        <span class="span">Lên đến 5%</span>
                    </li>
                    <li>
                        <input type="checkbox" class="checked">
                        <span class="span">Lên đến 10%</span>
                    </li>
                    <li>
                        <input type="checkbox" class="checked">
                        <span class="span">Lên đến 20%</span>
                    </li>
                    <li>
                        <input type="checkbox" class="checked">
                        <span class="span">Lên đến 30%</span>
                    </li>
                    <li>
                        <input type="checkbox" class="checked">
                        <span class="span">Lên đến 50%</span>
                    </li>
                    <li>
                        <input type="checkbox" class="checked">
                        <span class="span">Lên đến 60%</span>
                    </li>
                </ul>
            </div>
            <!-- //discounts -->
            <!-- reviews -->
            <div class="customer-rev left-side">
                <h3 class="agileits-sear-head">Đánh giá của khách hàng</h3>
                <ul>
                    <li>
                        <a href="#">
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <span>5.0</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star-o" aria-hidden="true"></i>
                            <span>4.0</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star-half-o" aria-hidden="true"></i>
                            <i class="fa fa-star-o" aria-hidden="true"></i>
                            <span>3.5</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star-o" aria-hidden="true"></i>
                            <i class="fa fa-star-o" aria-hidden="true"></i>
                            <span>3.0</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star-half-o" aria-hidden="true"></i>
                            <i class="fa fa-star-o" aria-hidden="true"></i>
                            <i class="fa fa-star-o" aria-hidden="true"></i>
                            <span>2.5</span>
                        </a>
                    </li>
                </ul>
            </div>
            <!-- //reviews -->
            <!-- cuisine -->
            <div class="left-side">
                <h3 class="agileits-sear-head">Thương hiệu</h3>
                <ul>
                    @Html.Action("ThuongHieu", "TimKiem")
                </ul>
            </div>
            <!-- //cuisine -->
            <!-- deals -->
            <!-- //tittle heading -->
            @{
                int masizeml = 3;
                int masizems = 1;
                List<VALI> listsizesl = Model.Where(n => n.masize == masizeml || n.masize == masizems).ToList();
                // Lấy ra yêu thích 
                List<VALI> listyeuthich = listsizesl.OrderByDescending(a => a.gia).Take(7).ToList();
            }
            <div class="deal-leftmk left-side">
                <h3 class="agileits-sear-head">Vali yêu thích</h3>
                @foreach (var vali in listyeuthich)
                {
                    <div class="special-sec1">
                        <div class="col-xs-4 img-deals">
                            <img style="width: 60px; height: 60px;" src="~/Content/AnhVali/@vali.anhvali" alt="Alternate Text" />
                        </div>
                        <div class="col-xs-8 img-deal1">
                            <h3 style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #000000">@vali.tenvali</h3>
                            <a href="single.html">@vali.giakhuyenmai VNĐ</a>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                }
            </div>
            <!-- //deals -->
        </div>
        <!-- //product left -->
        <!-- product right -->
        <div class="agileinfo-ads-display col-md-9">
            <div class="wrapper">
                <!-- first section (nuts) -->
                @{
                    List<String> danhmucsp = new List<String>();

                    var ketqua = from p in Model
                                 group p by p.DANHMUCVALI.tendanhmuc into gr
                                 select new
                                 {
                                     DMVali = gr.Key,
                                 };

                    foreach (var item in ketqua)
                    {
                        danhmucsp.Add(item.DMVali);
                    }
                }

                @{ int sttdm = 0;}
                <!-- //second section (nuts special) -->
                <!-- third section (oils) -->
                @foreach (var tendm in danhmucsp)
                {
                    if (sttdm == 1)
                    {
                        <div class="product-sec1 product-sec2">
                            <div class="col-xs-7 effect-bg">
                                <h3 style="font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif" class="">Vali Mia</h3>
                                <h6 style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Tận hưởng tất cả các Sản phẩm lành mạnh của chúng tôi</h6>
                                <p style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Được giảm giá thêm 10%</p>
                            </div>
                            <h3 class="w3l-nut-middle">Vali Mia</h3>
                            <div class="col-xs-5 bg-right-nut">
                                <img src="~/Content/images/nut1.png" alt="">
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    }
                    sttdm++;
                    <div class="product-sec1">
                        <h3 class="heading-tittle">@tendm</h3>
                        @foreach (var vali in Model)
                        {
                            {
                                if (tendm == vali.DANHMUCVALI.tendanhmuc)
                                {
                                    <div class="col-md-4 product-men">
                                        <div class="men-pro-item simpleCart_shelfItem">
                                            <div class="men-thumb-item">
                                                <img style="width: 240px; height: 240px;" src="~/Content/AnhVali/@vali.anhvali" alt="Alternate Text" />
                                                <div class="men-cart-pro">
                                                    <div class="inner-men-cart-pro">
                                                        <a href="@Url.Action("Details", "TrangChu", new { id = vali.mavali })" class="link-product-add-cart">Xem Nhanh</a>
                                                    </div>
                                                </div>
                                                <span class="product-new-top">Mới</span>
                                            </div>
                                            <div class="item-info-product ">
                                                <h4>
                                                    <a href="@Url.Action("Details", "TrangChu", new { id = vali.mavali })">@vali.tenvali</a>
                                                </h4>
                                                <div class="info-product-price">
                                                    <span class="item_price">@vali.giakhuyenmai</span>
                                                    <del>@vali.gia</del>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }

                            }
                        }
                        <div class="clearfix"></div>
                    </div>
                }
            </div>

            <!-- //Bắt đầu phân trang  -->
            <div>
                Trang @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) /
                @Model.PageCount
            </div>
            <div class="MenuTrang">
                @Html.PagedListPager(Model, page => Url.Action("ValiIndex", new
                {
                    page = page
                }))
            </div>
            <!-- //Kết thúc phân trang-->

        </div>
        <!-- //product right -->
    </div>
</div>


<!-- //top products -->
<!-- special offers -->
<div class="featured-section" id="projects">
    <div class="container">
        <!-- tittle heading -->
        <h3 class="tittle-w3l">
            Ưu đãi Đặc biệt
            <span class="heading-style">
                <i></i>
                <i></i>
                <i></i>
            </span>
        </h3>
        <!-- //tittle heading -->
        @{
            // Lấy ra các vali có giá khuyễn mãi nhiều nhất 
            int masizem = 2;
            List<VALI> listsizes = Model.Where(n => n.masize == masizem).ToList();
            List<VALI> valikhuyenmai = listsizes.OrderByDescending(a => a.giakhuyenmai).Take(8).ToList();
        }
        <div class="content-bottom-in">
            <ul id="flexiselDemo1">
                @foreach (var vali in valikhuyenmai)
                {
                    <li>
                        <div class="w3l-specilamk">
                            <div class="speioffer-agile">
                                <a href="@Url.Action("Details", "TrangChu", new { id = vali.mavali })">
                                    <img style="width: 240px; height: 240px;" src="~/Content/AnhVali/@vali.anhvali" alt="Alternate Text" />
                                </a>
                            </div>
                            <div class="product-name-w3l">
                                <h4>
                                    <a href="@Url.Action("Details", "TrangChu", new { id = vali.mavali })">@vali.tenvali</a>
                                </h4>
                                <div class="w3l-pricehkj">
                                    <h6>@vali.giakhuyenmai</h6>
                                    <p>Giảm gốc: @vali.gia</p>
                                </div>
                                <div class="snipcart-details top_brand_home_details item_add single-item hvr-outline-out">
                                </div>
                            </div>
                        </div>
                    </li>
                }
            </ul>
        </div>
    </div>
</div>
<!-- //special offers -->
